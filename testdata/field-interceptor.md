## Field interceptor

Firstly, let set up an empty golang project without any dependency.

```go.mod
module github.com/toniphan21/go-mapper-gen/example

go 1.25
```


### Intercept direct converter

There are 2 struct with common tag:

```go
// file: entity.go

package example

type User struct {
	ID    string
	Email string
	Name  *string
}

type UserEntity struct {
	ID    string
	Email *string
	Name  string
}
```

```pkl
packages {
	["github.com/toniphan21/go-mapper-gen/example"] {
		source_pkg = "{CurrentPackage}"
		structs {
			["User"] { 
				source_struct_name = "UserEntity"
				
				fields {
					target {
						["Name"] = set.nil_if_zero()
					}
					
					source { 
						["Email"] = set.nil_if_zero()
					}
				}
			}
		}
	}
}
```

the generated file is

```go
// golden-file: gen_mapper.go
// Code generated by github.com/toniphan21/go-mapper-gen - test, DO NOT EDIT.

package example

type iMapper interface {
	// ToUser converts a UserEntity value into a User value.
	ToUser(in UserEntity) User

	// FromUser converts a User value into a UserEntity value.
	FromUser(in User) UserEntity
}

func new_iMapper() iMapper {
	return &iMapperImpl{}
}

type iMapperImpl struct{}

func (m *iMapperImpl) ToUser(in UserEntity) User {
	var out User

	out.ID = in.ID
	if in.Email != nil {
		out.Email = *in.Email
	}
	var v0 string
	if in.Name != v0 {
		out.Name = &in.Name
	}

	return out
}

func (m *iMapperImpl) FromUser(in User) UserEntity {
	var out UserEntity

	out.ID = in.ID
	var v0 string
	if in.Email != v0 {
		out.Email = &in.Email
	}
	if in.Name != nil {
		out.Name = *in.Name
	}

	return out
}

var _ iMapper = (*iMapperImpl)(nil)
```

### use_function interceptor

There are 2 struct with common tag:

```go
// file: entity.go

package example

type User struct {
	ID    string
	Name  string
}

type UserEntity struct {
	ID    string
	Name  string
}

func SetName(in string) string {
	return "name: " + in
}
```

```pkl
packages {
	["github.com/toniphan21/go-mapper-gen/example"] {
		source_pkg = "{CurrentPackage}"
		structs {
			["User"] { 
				source_struct_name = "UserEntity"
				
				fields {
					target {
						["Name"] = set.use_function("github.com/toniphan21/go-mapper-gen/example.SetName")
					}
				}
			}
		}
	}
}
```

the generated file is

```go
// golden-file: gen_mapper.go
// Code generated by github.com/toniphan21/go-mapper-gen - test, DO NOT EDIT.

package example

type iMapper interface {
	// ToUser converts a UserEntity value into a User value.
	ToUser(in UserEntity) User

	// FromUser converts a User value into a UserEntity value.
	FromUser(in User) UserEntity
}

func new_iMapper() iMapper {
	return &iMapperImpl{}
}

type iMapperImpl struct{}

func (m *iMapperImpl) ToUser(in UserEntity) User {
	var out User

	out.ID = in.ID
	out.Name = SetName(in.Name)

	return out
}

func (m *iMapperImpl) FromUser(in User) UserEntity {
	var out UserEntity

	out.ID = in.ID
	out.Name = in.Name

	return out
}

var _ iMapper = (*iMapperImpl)(nil)
```

### use_method interceptor

There are 2 struct with common tag:

```go
// file: entity.go

package example

type User struct {
	ID    string
	Name  string
}

type UserEntity struct {
	ID    string
	Name  string
}

type helper struct {}

func (h *helper) SetName(in string) string {
	return "name: " + in
}

var Helper = &helper{}
```

```pkl
packages {
	["github.com/toniphan21/go-mapper-gen/example"] {
		source_pkg = "{CurrentPackage}"
		structs {
			["User"] { 
				source_struct_name = "UserEntity"
				
				target_fields {
					["Name"] = set.use_method("github.com/toniphan21/go-mapper-gen/example.Helper", "SetName")
				}
			}
		}
	}
}
```

the generated file is

```go
// golden-file: gen_mapper.go
// Code generated by github.com/toniphan21/go-mapper-gen - test, DO NOT EDIT.

package example

type iMapper interface {
	// ToUser converts a UserEntity value into a User value.
	ToUser(in UserEntity) User

	// FromUser converts a User value into a UserEntity value.
	FromUser(in User) UserEntity
}

func new_iMapper() iMapper {
	return &iMapperImpl{}
}

type iMapperImpl struct{}

func (m *iMapperImpl) ToUser(in UserEntity) User {
	var out User

	out.ID = in.ID
	out.Name = Helper.SetName(in.Name)

	return out
}

func (m *iMapperImpl) FromUser(in User) UserEntity {
	var out UserEntity

	out.ID = in.ID
	out.Name = in.Name

	return out
}

var _ iMapper = (*iMapperImpl)(nil)
```
