amends ".../Config.pkl"

all {
  output { file_name = "mycode.go" }
}

converter {
  built_in {
    enable_type_to_pointer = true

    library {
      enable_pgtype = false
    }
  }

  functions {
    "github.com/toniphan21/pgx-mapper.NilableStringToText"
    "github.com/toniphan21/pgx-mapper.TextToNilableString"
  }
}

packages {
  ["github.com/toniphan21/singular"] {
    mode = "functions"

    source_pkg = "{CurrentPackage}"
    decorator_noop_name = ""

    structs {
      ["LoginParams"] { source_struct_name = "Login" }
    }
  }

  ["github.com/toniphan21/plural"] {
    priorities {
      [0] {
        source_pkg = "{CurrentPackage}"

        structs {
          ["LoginParams"] { source_struct_name = "Login" }
        }
      }

      [1] {
        source_pkg = "{CurrentPackage}"

        structs {
          ["LoginParams"] {
            target_struct_name = "LoginParams"
            source_struct_name = "Login"
            source_to_target_function_name = ""
            source_from_target_function_name = ""
            pointer = "none"
            generate_source_to_target = true
          }
        }
      }
    }
  }

  ["github.com/toniphan21/custom-field-mapping"] {
    source_pkg = ""

    structs {
      ["LoginParams"] {
        source_struct_name = "Login"

        fields {
          match = "ignore-case"
          map {
            ["Attribute"] = "Attr"
            ["Auth"] = "Authenticate"
          }
        }
      }

    }
  }

}