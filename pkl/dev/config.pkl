amends ".../Config.pkl"

all {
  output { file_name = "mycode.go" }

  convert_functions {
    new {
      target { pkg = "" type = "string" pointer = true }
      source { pkg = "pgtype" type = "Text" }
      convert_by { pkg = "" func = "" }
    }

    new {
      target = "github.com/jackc/pgx/v5/pgtype.Text"
      source = "*string"
      convert_by = "github.com/toniphan21/pgx-mapper.NilableStringToText"
    }

    new {
      target = "*string"
      source = "github.com/jackc/pgx/v5/pgtype.Text"
      convert_by = "github.com/toniphan21/pgx-mapper.TextToNilableString"
    }
  }
}

packages {
  ["github.com/toniphan21/singular"] {
    source_pkg = "{CurrentPackage}"

    structs {
      ["LoginParams"] { source_struct_name = "Login" }
    }
  }

  ["github.com/toniphan21/plural"] {
    priorities {
      [0] {
        source_pkg = "{CurrentPackage}"

        structs {
          ["LoginParams"] { source_struct_name = "Login" }
        }
      }

      [1] {
        source_pkg = "{CurrentPackage}"

        structs {
          ["LoginParams"] {
            target_struct_name = "LoginParams"
            source_struct_name = "Login"
            source_to_target_function_name = ""
            source_from_target_function_name = ""
            pointer = "none"
            generate_source_to_target = true
          }
        }
      }
    }
  }

  ["github.com/toniphan21/custom-field-mapping"] {
    source_pkg = ""

    structs {
      ["LoginParams"] {
        source_struct_name = "Login"

        fields {
          match = "ignore-case"
          map {
            ["Attribute"] = "Attr"
            ["Auth"] = "Authenticate"
          }
        }
      }

    }
  }

}